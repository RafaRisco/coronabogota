{% extends 'base.html' %}
{% load static %}


{% block navbar %}
{% include 'navbar.html' %}
{% endblock navbar %}

{% block content %}

<div class='container'>

  <div class='col-10'>
    <h2 class='text-white' class='mt-3'><b>Nos gustaría conocer tu ubicación</h2>
  </div>

  <button type="submit" class="btn btn-primary btn-lg mt-5" id='Accept' onClick="getLocation()">
    <div class='text-white'>
      Facilitar mi ubicación
    </div>
  </button>

</div>

<script type="text/javascript">
  function getLocation() {
      if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(onSuccess, onError, {
          maximumAge: 60000,
          timeout: 5*60*1000,
          enableHighAccurady: true
        });
      } else {
          alert("Your browser does not support HTML5 geolocation")
      }
  }

  function onSuccess(position)
  {
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    console.log(lat, long)
  }

  function onError(error)
  {
    switch(error.code)
    {
      case PERMISION_DENIED:
        alert("User denied permission");
        break;
      case TIMEOUT:
        alert("Geolocation timed out");
        break;
      case POSITION_UNAVAILABLE:
        alert("Geolocation information is not available")
        break;
      default:
        alert("Unknown error");
        break;
    }
  }
</script>

{% endblock content %}
